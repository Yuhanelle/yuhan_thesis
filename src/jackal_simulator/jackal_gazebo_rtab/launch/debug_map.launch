<launch>
  <arg name="j1"        default="jackal1"/>
  <arg name="j2"        default="jackal2"/>
  <arg name="j3"        default="jackal3"/>
  <arg name="j4"        default="jackal4"/>

  <arg name="j1_x_pos" default="14"/>
  <arg name="j1_y_pos" default="14"/>
  <arg name="j1_z_pos" default="0"/>
  <arg name="j1_yaw"   default="3.14"/>
  <arg name="j2_x_pos" default="-14"/>
  <arg name="j2_y_pos" default="-14"/>
  <arg name="j2_z_pos" default="0"/>
  <arg name="j2_yaw"   default="0"/>
  <arg name="j3_x_pos" default="14"/>
  <arg name="j3_y_pos" default="-14"/>
  <arg name="j3_z_pos" default="0"/>
  <arg name="j3_yaw"   default="3.14"/>
  <arg name="j4_x_pos" default="-14"/>
  <arg name="j4_y_pos" default="14"/>
  <arg name="j4_z_pos" default="0"/>
  <arg name="j4_yaw"   default="0"/>

   <group ns="/$(arg j1)/map_merge">
    <param name="init_pose_x" value="$(arg j1_x_pos)"/>
    <param name="init_pose_y" value="$(arg j1_y_pos)"/>
    <param name="init_pose_z" value="$(arg j1_z_pos)"/>
    <param name="init_pose_yaw" value="0.0"/>
  </group>

  <group ns="/$(arg j2)/map_merge">
    <param name="init_pose_x" value="$(arg j2_x_pos)"/>
    <param name="init_pose_y" value="$(arg j2_y_pos)"/>
    <param name="init_pose_z" value="$(arg j2_z_pos)"/>
    <param name="init_pose_yaw" value="0.0"/>
  </group>
  
  <group ns="/$(arg j3)/map_merge">
    <param name="init_pose_x" value="$(arg j3_x_pos)"/>
    <param name="init_pose_y" value="$(arg j3_y_pos)"/>
    <param name="init_pose_z" value="$(arg j3_z_pos)"/>
    <param name="init_pose_yaw" value="0.0"/>
  </group>

  <group ns="/$(arg j4)/map_merge">
    <param name="init_pose_x" value="$(arg j4_x_pos)"/>
    <param name="init_pose_y" value="$(arg j4_y_pos)"/>
    <param name="init_pose_z" value="$(arg j4_z_pos)"/>
    <param name="init_pose_yaw" value="0.0"/>
  </group>

  <node pkg="multirobot_map_merge" type="map_merge" respawn="false" name="map_merge" output="screen" ns="j1_j2">
    <param name="robot_map_topic" value="map"/>
    <param name="namespace1" value = "/$(arg j1)"/>
    <param name="namespace2" value = "/$(arg j2)"/>
    <param name="two_robot_merge" value="true"/>
    <param name="robot_namespace" value=""/>
    <param name="merged_map_topic" value="merge_map"/>
    <param name="world_frame" value="map"/>
    <param name="known_init_poses" value="true"/>/>
    <param name="merging_rate" value="5.0"/>
    <param name="discovery_rate" value="0.1"/>
    <param name="estimation_rate" value="1.0"/>
    <param name="estimation_confidence" value="1.0"/>
  </node>
</launch>

  <!--jackal 1 and 2-->
  <!-- <include file="$(find jackal_navigation_rtab)/launch/include/two_jackal_merge.launch">
    <arg name="ns1"      value="$(arg j1)"/>
    <arg name="ns2"      value="$(arg j2)"/>
    <arg name="j1_x_pos" value="$(arg j1_x_pos)"/>
    <arg name="j1_y_pos" value="$(arg j1_y_pos)"/>
    <arg name="j1_z_pos" value="$(arg j1_z_pos)"/>
    <arg name="j1_yaw"   value="$(arg j1_yaw)"/>
    <arg name="j2_x_pos" value="$(arg j2_x_pos)"/>
    <arg name="j2_y_pos" value="$(arg j2_y_pos)"/>
    <arg name="j2_z_pos" value="$(arg j2_z_pos)"/>
    <arg name="j2_yaw"   value="$(arg j2_yaw)"/>
  </include> -->

  <!--jackal 1 and 3-->
  <!-- <include file="$(find jackal_navigation_rtab)/launch/include/two_jackal_merge.launch">
    <arg name="ns1"      value="$(arg j1)"/>
    <arg name="ns2"      value="$(arg j3)"/>
    <arg name="j1_x_pos" value="$(arg j1_x_pos)"/>
    <arg name="j1_y_pos" value="$(arg j1_y_pos)"/>
    <arg name="j1_z_pos" value="$(arg j1_z_pos)"/>
    <arg name="j1_yaw"   value="$(arg j1_yaw)"/>
    <arg name="j2_x_pos" value="$(arg j3_x_pos)"/>
    <arg name="j2_y_pos" value="$(arg j3_y_pos)"/>
    <arg name="j2_z_pos" value="$(arg j3_z_pos)"/>
    <arg name="j2_yaw"   value="$(arg j3_yaw)"/>
  </include> -->
  <!--jackal 1 and 4-->
  <!-- <include file="$(find jackal_navigation_rtab)/launch/include/two_jackal_merge.launch">
    <arg name="ns1"      value="$(arg j1)"/>
    <arg name="ns2"      value="$(arg j4)"/>
    <arg name="j1_x_pos" value="$(arg j1_x_pos)"/>
    <arg name="j1_y_pos" value="$(arg j1_y_pos)"/>
    <arg name="j1_z_pos" value="$(arg j1_z_pos)"/>
    <arg name="j1_yaw"   value="$(arg j1_yaw)"/>
    <arg name="j2_x_pos" value="$(arg j4_x_pos)"/>
    <arg name="j2_y_pos" value="$(arg j4_y_pos)"/>
    <arg name="j2_z_pos" value="$(arg j4_z_pos)"/>
    <arg name="j2_yaw"   value="$(arg j4_yaw)"/>
  </include> -->

  <!--jackal 2 and 3-->
  <!-- <include file="$(find jackal_navigation_rtab)/launch/include/two_jackal_merge.launch">
    <arg name="ns1"      value="$(arg j2)"/>
    <arg name="ns2"      value="$(arg j3)"/>
    <arg name="j1_x_pos" value="$(arg j2_x_pos)"/>
    <arg name="j1_y_pos" value="$(arg j2_y_pos)"/>
    <arg name="j1_z_pos" value="$(arg j2_z_pos)"/>
    <arg name="j1_yaw"   value="$(arg j2_yaw)"/>
    <arg name="j2_x_pos" value="$(arg j3_x_pos)"/>
    <arg name="j2_y_pos" value="$(arg j3_y_pos)"/>
    <arg name="j2_z_pos" value="$(arg j3_z_pos)"/>
    <arg name="j2_yaw"   value="$(arg j3_yaw)"/>
  </include> -->

  <!--jackal 2 and 4-->
  <!-- <include file="$(find jackal_navigation_rtab)/launch/include/two_jackal_merge.launch">
    <arg name="ns1"      value="$(arg j2)"/>
    <arg name="ns2"      value="$(arg j4)"/>
    <arg name="j1_x_pos" value="$(arg j2_x_pos)"/>
    <arg name="j1_y_pos" value="$(arg j2_y_pos)"/>
    <arg name="j1_z_pos" value="$(arg j2_z_pos)"/>
    <arg name="j1_yaw"   value="$(arg j2_yaw)"/>
    <arg name="j2_x_pos" value="$(arg j4_x_pos)"/>
    <arg name="j2_y_pos" value="$(arg j4_y_pos)"/>
    <arg name="j2_z_pos" value="$(arg j4_z_pos)"/>
    <arg name="j2_yaw"   value="$(arg j4_yaw)"/>
  </include> -->
  <!--jackal 3 and 4-->
  <!-- <include file="$(find jackal_navigation_rtab)/launch/include/two_jackal_merge.launch">
    <arg name="ns1"      value="$(arg j3)"/>
    <arg name="ns2"      value="$(arg j4)"/>
    <arg name="j1_x_pos" value="$(arg j3_x_pos)"/>
    <arg name="j1_y_pos" value="$(arg j3_y_pos)"/>
    <arg name="j1_z_pos" value="$(arg j3_z_pos)"/>
    <arg name="j1_yaw"   value="$(arg j3_yaw)"/>
    <arg name="j2_x_pos" value="$(arg j4_x_pos)"/>
    <arg name="j2_y_pos" value="$(arg j4_y_pos)"/>
    <arg name="j2_z_pos" value="$(arg j4_z_pos)"/>
    <arg name="j2_yaw"   value="$(arg j4_yaw)"/>
  </include> -->